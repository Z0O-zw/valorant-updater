<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>è°ƒè¯• Leaderboard æ•°æ®</title>
</head>
<body>
  <h1>è°ƒè¯• Leaderboard æ•°æ®</h1>
  <button onclick="checkData()">æ£€æŸ¥æ•°æ®</button>
  <pre id="log"></pre>

  <script type="module">
    import { loadConfig } from './js/config.js';
    import { loadLeaderboardData } from './js/api/github.js';

    window.checkData = async function() {
      const log = document.getElementById('log');
      log.textContent = 'å¼€å§‹æ£€æŸ¥...\n';

      try {
        // åŠ è½½é…ç½®
        await loadConfig();
        log.textContent += 'âœ… é…ç½®åŠ è½½å®Œæˆ\n';

        // ä»GitHubåŠ è½½leaderboardæ•°æ®
        const leaderboardData = await loadLeaderboardData();

        if (leaderboardData && leaderboardData.players) {
          log.textContent += `\nğŸ“Š Leaderboard æ•°æ® (${leaderboardData.players.length} ä¸ªç©å®¶):\n\n`;

          leaderboardData.players.forEach((player, index) => {
            log.textContent += `ç©å®¶ ${index + 1} (${player.puuid.substring(0, 8)}...):\n`;
            log.textContent += `  - kills: ${player.kills}\n`;
            log.textContent += `  - deaths: ${player.deaths}\n`;
            log.textContent += `  - assists: ${player.assists}\n`;
            log.textContent += `  - headshots: ${player.headshots}\n`;
            log.textContent += `  - bodyshots: ${player.bodyshots}\n`;
            log.textContent += `  - legshots: ${player.legshots}\n`;
            log.textContent += `  - headrate: ${player.headrate}\n`;
            log.textContent += `  - win: ${player.win}\n`;
            log.textContent += `  - all: ${player.all}\n`;
            log.textContent += `  - è®¡ç®—çš„çˆ†å¤´ç‡: ${
              (player.headshots + player.bodyshots + player.legshots) > 0
                ? ((player.headshots / (player.headshots + player.bodyshots + player.legshots)) * 100).toFixed(1)
                : '0'
            }%\n`;
            log.textContent += '\n';
          });

          // æ˜¾ç¤ºåŸå§‹JSONçš„ä¸€éƒ¨åˆ†
          log.textContent += '\nåŸå§‹JSON (ç¬¬ä¸€ä¸ªç©å®¶):\n';
          log.textContent += JSON.stringify(leaderboardData.players[0], null, 2);
        } else {
          log.textContent += 'âŒ æ— æ³•åŠ è½½ leaderboard æ•°æ®\n';
        }

      } catch (error) {
        log.textContent += `âŒ é”™è¯¯: ${error.message}\n`;
        console.error('è¯¦ç»†é”™è¯¯:', error);
      }
    }
  </script>
</body>
</html>